# ~/.bashrc: executed by bash(1) for non-login shells.
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples

# If not running interactively, don't do anything
if [[ -n "$PS1" ]]; then
    export BASH_HOME=~/.bash.d
    export EDITOR='vim'
    export IMAGE_VIEWER='gthumb'
    export BASH_THEME='equator'
    export TERM="xterm-256color"
    export PATH=$HOME/.local/bin:$PATH

    # Pythons!
    export IPYTHONDIR=$HOME/.ipython
    export WORKON_HOME=$HOME/.virtualenv

    if [[ -s $HOME/.python-startup.py ]]; then
        export PYTHONSTARTUP=$HOME/.python-startup.py
    fi

    . "$BASH_HOME/init.sh"

    # krew
    export PATH="${KREW_ROOT:-$HOME/.krew}/bin:$PATH"

    export PATH="$HOME/.gobin:$PATH"

    # docker
    export DOCKER_BUILDKIT=1

    export GO111MODULE=on

    export PATH="/opt/zig:$PATH"

    if [[ -n $(command -v gh) ]]; then
        eval "$(gh completion -s bash)"
    fi

    for cmd in cue kube-linter grype kubectl; do
        if [[ -n $(command -v $cmd) ]]; then
            eval "$($cmd completion bash)"
        fi
    done

    if [[ -n $(command -v terraform) ]]; then
        complete -C terraform terraform
    fi

    . "$HOME/.asdf/asdf.sh"
    . "$HOME/.asdf/completions/asdf.bash"

    . "$(asdf where python)/bin/virtualenvwrapper.sh"

    if [[ -n $(command -v pipx) ]]; then
        eval "$(register-python-argcomplete pipx)"
    fi

    if [[ -n $(command -v pip) ]]; then
        eval "$(pip completion --bash)"
    fi

    for cmd in rustup deno; do
        if [[ -n $(command -v $cmd) ]]; then
            eval "$($cmd completions bash)"
        fi
    done

    if [[ -n $(command -v rustc) ]]; then
        . "$(rustc --print sysroot)/etc/bash_completion.d/cargo"
    fi
fi
